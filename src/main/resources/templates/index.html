<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.w3.org/1999/xhtml"
      xmlns="http://www.w3.org/1999/xhtml">

    <head th:replace="/fragment1 :: head"></head>
    <header th:replace="/fragment1 :: header"></header>

    <body>
        <div id="carouselExampleFade" class="carousel slide carousel-fade" data-ride="carousel">
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img class="d-block w-100" th:src="@{/images/mirogue1.jpg}">
                </div>
                <div class="carousel-item">
                    <img class="d-block w-100" th:src="@{/images/thor1.jpg}">
                </div>
                <div class="carousel-item">
                    <img class="d-block w-100" th:src="@{/images/spectre1.jpg}">
                </div>
                <div class="carousel-item">
                    <img class="d-block w-100" th:src="@{/images/roqueone1.jpg}">
                </div>
            </div>
            <a class="carousel-control-prev" href="#carouselExampleFade" role="button" data-slide="prev">
            </a>
            <a class="carousel-control-next" href="#carouselExampleFade" role="button" data-slide="next">
            </a>
        </div>
        <div class="container-fluid">

            <!--Iteração com a lista de filmes disponíveis-->
            <div class="filmeBlock" th:each = "f : ${movies}">
                <div class="row" >
                    <div class="col-md-3 offset-1">
                        <img th:src="${f.imageUrl}" alt="Generic placeholder image">
                    </div>
                    <div class="col-sm-8">
                        <div class="row">
                            <div class="col-sm-12">
                                <h4 class="mt-0" th:text="${f.name}"></h4>
                            </div>
                            <div class="col-sm-12">
                                <div class="rating" th:each="i : ${#numbers.sequence(1,f.rating)}">
                                    <i class="fas fa-star iconIndex"></i>
                                </div>
                            </div>

                            <div class="col-sm-12">
                                <p th:text="${f.year}"></p>
                                <p ht:text="${f.genre.name}"></p>
                            </div>

                            <div class="col-sm-10">
                                <p class="prospect" th:text="${f.prospect}"></p>
                            </div>
                            <div class="col-sm-2"></div>
                            <div class="col-sm-10">
                                <p class="actors" th:text="'Elenco: '+ ${f.actors}"></p>
                                <p class="actors" th:text="'Direção: '+${f.director}"></p>
                            </div>
                            <div class="col-sm-2"></div>
                            <div class="col-sm-12">
                                <div class="filmBottons">
                                    <a
                                        role="button"
                                        class="btn btn-outline-success"                                      
                                        th:text="'R$ '+${#numbers.formatDecimal(f.rentPrice, 0, 'POINT', 2, 'COMMA')}"
                                        th:href="@{/alugar/{idMovie}(idMovie=${f.id_movie})}">
                                    </a>
                                    <a 
                                        th:href="@{/detalhe_filme/{idMovie}(idMovie=${f.id_movie})}" 
                                        class="btn btn-outline-success" 
                                        role="button" aria-pressed="true">
                                        Trailer
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Modal -->
            <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Confirmação</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <p></p>
                        </div>
                        <div class="modal-footer">
                            <a class="btn btn-outline-success" 
                               role="button"  aria-pressed="true">Sim</a>
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Não</button>
                        </div>
                    </div>
                </div>
            </div>
    </body>
    <script th:inline="javascript">
        /*<![CDATA[*/
        function modalRemover(id) {
            $("#myModal").modal('show');
            var recipient = id
            var modal = $("#myModal")
            //modal.find('.modal-title').text('New message to ' + recipient)
            modal.find('.modal-body p').text(recipient)
            modal.find('.modal-footer a').text(recipient)
        }
//        th:attr="onclick = ${ 'modalRemover(' + f.id_movie +')' }" 
        /*]]>*/
    </script>
</html>